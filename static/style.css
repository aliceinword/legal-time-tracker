/* ===========================
   Legal Time Tracker — Styles
   Consolidated, high-contrast
   =========================== */

/* ---- Tokens (Light) ---- */
:root{
  --bg:#f7f7fb;
  --card:#ffffff;
  --ink:#1f2328;       /* base text */
  --muted:#475569;     /* readable muted */
  --border:#e6e8ec;

  --brand:#2d79c7;     /* primary */
  --brand-ink:#ffffff;

  --danger:#c72d2d;
  --success:#16a34a;
  --warning:#d97706;

  /* Stopwatch tint */
  --sw-bg:#eef2ff;     /* indigo-50 */
  --sw-border:#93c5fd; /* blue-300 */
}

/* ---- Tokens (Dark) — support both selectors ---- */
body.theme[data-theme="dark"],
body[data-theme="dark"]{
  --bg:#0b1220;
  --card:#111827;
  --ink:#e5e7eb;
  --muted:#cbd5e1;
  --border:#374151;

  --brand:#60a5fa;
  --brand-ink:#0b1220;

  --danger:#f87171;
  --success:#4ade80;
  --warning:#fbbf24;

  --sw-bg:#0f172a;
  --sw-border:#334155;
}

/* Base */
*{box-sizing:border-box}
html,body{
  margin:0; padding:0;
  color:var(--ink); background:var(--bg);
  font:14px/1.5 system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
}
a{color:var(--brand);text-decoration:none}
a:hover{text-decoration:underline}

/* Layout */
.container{max-width:1100px;margin:24px auto;padding:0 16px}
.container.narrow{max-width:520px}

.topbar{
  display:flex;align-items:center;gap:16px;
  padding:12px 16px;background:var(--card);
  border-bottom:1px solid var(--border);
  position:sticky;top:0;z-index:10
}
.topbar .brand{font-weight:700}
.topbar nav{display:flex;gap:12px;align-items:center;width:100%}
.topbar nav a{padding:6px 10px;border-radius:8px}
.topbar nav a.active{background:var(--brand);color:var(--brand-ink)}
.spacer{flex:1}
.user{opacity:.85}

/* Card */
.card{background:var(--card);border:1px solid var(--border);border-radius:12px;padding:16px;margin-bottom:16px}
.card.soft{background:#fbfcfe}

/* Ensure text inside cards/tables/forms is never faint */
.card,
.card *:not(.btn):not(.badge):not(.chip){
  color:var(--ink) !important;
}

/* Labels & fields */
label{display:block;font-weight:600;margin:8px 0}
label input, label textarea, label select{
  width:100%;margin-top:6px;padding:10px;
  border:1px solid var(--border);border-radius:8px;
  background:var(--card);color:var(--ink);
}
input,select,textarea{
  color:var(--ink); background:var(--card); border:1px solid var(--border);
}
input::placeholder,textarea::placeholder{color:var(--muted);opacity:1}

/* Grids & rows */
.w100{width:100%}
.row{display:flex;gap:10px;align-items:center}
.row.gap{gap:12px}
.row.space-between{justify-content:space-between}
.row.end{justify-content:flex-end}
.row.align-end{align-items:end}
.inline{display:inline}

.grid.two{display:grid;grid-template-columns:1fr 1fr;gap:16px}
.grid.three{display:grid;grid-template-columns:1fr 1fr 1fr;gap:16px}
.grid.four{display:grid;grid-template-columns:1.5fr 1fr 1fr auto;gap:16px}
@media (max-width:900px){ .grid.two,.grid.three,.grid.four{grid-template-columns:1fr} }

/* Let fields span multiple columns in grid forms */
.grid.two .col-span-2,
.grid.three .col-span-2,
.grid.four .col-span-2 { grid-column: span 2; }

.grid.two .col-span-all,
.grid.three .col-span-all,
.grid.four .col-span-all { grid-column: 1 / -1; }

/* Mobile: falling back to single column is fine */
@media (max-width:900px){
  .col-span-2, .col-span-all { grid-column: auto; }
}


/* Buttons */
.btn{
  border:1px solid var(--border);background:var(--card);
  color:var(--ink);
  border-radius:8px;padding:8px 12px;cursor:pointer
}
.btn:hover{filter:brightness(.98)}
.btn.small{padding:4px 8px;font-size:12px}
.btn.link{background:transparent;border:none;color:var(--brand);padding:0}
.btn.primary{background:var(--brand);color:var(--brand-ink);border-color:var(--brand)}
.btn.danger {background:var(--danger);color:#fff;border-color:var(--danger)}
.btn.success{background:var(--success);color:#fff;border-color:var(--success)}
.btn.warning{background:var(--warning);color:#111;border-color:var(--warning)}

/* Theme toggle chip */
.theme-toggle{border:1px solid var(--border);background:var(--card);border-radius:999px;padding:6px 10px;cursor:pointer}
.theme-toggle:focus{outline:2px solid #9ec1ff;outline-offset:2px}

/* Flash messages */
.flash{margin-bottom:16px}
.flash-item{background:#fff6d6;border:1px solid #ffe08a;padding:10px;border-radius:8px;margin-bottom:6px}
.flash-item.success{background:#ecfdf5;border:1px solid #a7f3d0;color:#065f46}
.flash-item.danger {background:#fef2f2;border:1px solid #fecaca;color:#7f1d1d}
.flash-item.warning{background:#fffbeb;border:1px solid #fde68a;color:#78350f}

/* Table */
.table-wrap{width:100%;overflow:auto}
.table{width:100%;border-collapse:separate;border-spacing:0}
.table th,.table td{border-bottom:1px solid var(--border);text-align:left;padding:10px;vertical-align:top;color:var(--ink)}
.table th{font-size:13px;color:var(--ink);font-weight:700;background:#f3f4f6}
.table td.desc{max-width:520px;white-space:pre-wrap}
.table td.actions{white-space:nowrap}
.table tbody tr:nth-child(even){background:#fafafa}

/* Make "new" items look like others (no weird white box) */
tr.added, tr.just-added, .row.added, .item.added, .just-added{
  background:inherit !important; color:inherit !important; border:none !important;
}
/* Optional gentle highlight */
@keyframes rowFlash{ from{background:#fffbe6} to{background:transparent} }
tr.just-added{ animation: rowFlash 1.2s ease-out 1; }

/* Responsive table → card rows */
@media (max-width:700px){
  table.table thead{display:none}
  table.table tbody tr{display:block;margin-bottom:12px;border:1px solid var(--border);border-radius:12px;background:var(--card);color:var(--ink)}
  table.table tbody tr td{display:flex;gap:8px;justify-content:space-between;border-bottom:1px solid var(--border)}
  table.table tbody tr td:last-child{border-bottom:none}
  table.table tbody tr td::before{content:attr(data-label);font-weight:700;color:var(--ink)}
}

/* Chips */
.chip{display:inline-block;border:1px solid var(--border);padding:.15rem .5rem;border-radius:999px;margin-left:.25rem;color:var(--ink)}

/* Stopwatch */
#stopwatch-card{ background:var(--sw-bg); border:1px solid var(--sw-border); }
.stopwatch-display{
  font:700 30px/1.2 ui-monospace,SFMono-Regular,Menlo,Consolas,"Liberation Mono",monospace;
  padding:10px 14px; border:2px solid var(--sw-border);
  border-radius:12px; background:var(--sw-bg); color:var(--ink) !important;
}

/* Admin Users page: force readable inputs */
#admin-users input,
#admin-users select,
#admin-users textarea{
  color:var(--ink) !important;
  background:var(--card) !important;
  border:1px solid var(--border) !important;
  padding:8px 10px;border-radius:8px;
}

/* Dark-specific surfaces */
body.theme[data-theme="dark"] .topbar,
body[data-theme="dark"] .topbar{ border-color:var(--border) }
body.theme[data-theme="dark"] .card,
body[data-theme="dark"] .card{ border-color:var(--border) }
body.theme[data-theme="dark"] .table th,
body.theme[data-theme="dark"] .table td,
body[data-theme="dark"] .table th,
body[data-theme="dark"] .table td{ border-color:var(--border) }
body.theme[data-theme="dark"] .btn,
body[data-theme="dark"] .btn{ background:#1f2937; border-color:var(--border); color:var(--ink) }
/* ===== Fix white boxes in dark mode (admin users + new entries) ===== */

/* Make sure dark tokens apply if data-theme="dark" is on <html> too */
html[data-theme="dark"] {
  --bg:#0b1220;
  --card:#111827;
  --ink:#e5e7eb;
  --muted:#cbd5e1;
  --border:#374151;
}

/* 1) Kill any hardcoded white backgrounds on table rows */
.table tbody tr,
.table tbody tr td {
  background: transparent !important;  /* rows take the card color behind them */
  color: var(--ink) !important;
  border-color: var(--border) !important;
}

/* If you LIKE zebra striping, give it a dark-friendly tint */
html[data-theme="dark"] .table tbody tr:nth-child(even),
body[data-theme="dark"] .table tbody tr:nth-child(even) {
  background: rgba(255,255,255,0.03) !important;  /* very subtle */
}

/* Responsive “card row” view must not force white */
@media (max-width:700px){
  table.table tbody tr {
    background: var(--card) !important;   /* the card color for mobile blocks */
    color: var(--ink) !important;
    border: 1px solid var(--border) !important;
  }
}

/* 2) Newly added rows/items should NOT get a bright box */
tr.added, tr.just-added, .row.added, .item.added, .just-added {
  background: inherit !important;
  color: inherit !important;
  border: none !important;
}

/* 3) Admin → Users: make sure the form and rows always use card colors */
#admin-users .card,
#admin-users .table tbody tr,
#admin-users input,
#admin-users select,
#admin-users textarea {
  background: var(--card) !important;
  color: var(--ink) !important;
  border-color: var(--border) !important;
}
/* ===== Fix: table headers invisible in dark mode (Admin page) ===== */

/* Apply whether data-theme="dark" is on <html> or <body> */
html[data-theme="dark"] .table thead th,
body[data-theme="dark"] .table thead th {
  background: var(--card) !important;   /* dark surface */
  color: var(--ink) !important;         /* light text */
  border-bottom-color: var(--border) !important;
}

/* Make sure the whole header row uses the same surface */
html[data-theme="dark"] .table thead tr,
body[data-theme="dark"] .table thead tr {
  background: var(--card) !important;
}

/* Slightly stronger by default too (light mode stays readable) */
.table thead th {
  color: var(--ink) !important;
  font-weight: 700;
}
@media (max-width:700px){
  table.table thead{ display:none; } /* this is intentional */
}
/* Tight checkbox + label pairing */
.checkline{
  display:inline-flex;
  align-items:center;
  gap:6px;              /* bring box close to text */
  font-weight:600;
  margin:6px 0;
}
.checkline input[type="checkbox"]{
  margin:0;            /* remove browser default offset */
  inline-size:16px;
  block-size:16px;
}

/* If any parent uses .row with large gap, keep checkline tight */
.row .checkline{ gap:6px; }
/* Tight checkbox + label alignment */
label.checkline {
  display: inline-flex;
  align-items: center;
  gap: 8px;        /* bring text close to the box */
  margin: 8px 0;
  font-weight: 600;
}
label.checkline input[type="checkbox"] { margin: 0; }
/* Entry form: make Hours input a bit larger */
#entry-form input[name="hours"]{
  min-width: 140px;        /* was ~100px; tweak as you like */
  padding: 10px 12px;      /* roomier tap target */
  font-size: 16px;         /* easier to read */
}
}
/* Auth page polish + alignment */
/* Auth page polish */
.auth-page{ min-height:calc(100vh - 56px); display:grid; place-items:center; padding:24px 16px; }
.auth-card{ width:420px; max-width:100%; padding:20px; }
.auth-header h1{ margin:0 0 4px; font-size:22px; line-height:1.25; font-weight:700; }
.auth-header .sub{ margin:0 0 16px; color:var(--muted); }
.auth-form label{ display:block; margin:10px 0; }
.auth-form input{ width:100%; height:42px; }
.input-with-button{ display:flex; gap:8px; align-items:center; }
.input-with-button input{ flex:1; }
.btn.ghost{ background:transparent; border-color:var(--border); }
.btn.wide{ width:100%; margin-top:6px; }


.auth-actions { display: flex; gap: 10px; align-items: center; }
.auth-tip {
  font-size: 13px; color: var(--muted);
  background: var(--card); border: 1px solid var(--border);
  border-radius: 8px; padding: 10px;
}

@media (max-width:700px){
  .auth-actions { flex-direction: column-reverse; align-items: stretch; }
}
/* ===== Auth page polish ===== */
.auth-page{
  min-height: calc(100vh - 56px); /* leaves a little room for topbar */
  display: grid; place-items: center;
  padding: 24px 16px;
}

.auth-card{ width: 420px; max-width: 100%; padding: 20px; }

.auth-header h1{
  margin: 0 0 4px; font-size: 22px; line-height: 1.25; font-weight: 700;
}
.auth-header .sub{ margin: 0 0 16px; color: var(--muted); }

.auth-form label{ display:block; margin: 10px 0; }
.auth-form input{ width:100%; }

/* Input + Show button inline */
.input-with-button{ display:flex; gap:8px; align-items:center; }
.input-with-button input{ flex:1; }
.btn.ghost{ background:transparent; border-color:var(--border); }

/* Footer bits */
.fine-print{ margin: 6px 0 4px; font-size: 13px; color: var(--muted); }
.btn.wide{ width:100%; margin-top: 6px; }

.divider{
  height: 1px; background: var(--border); margin: 16px 0;
  border-radius: 1px;
}
.auth-tip{
  font-size: 13px; color: var(--muted);
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 8px; padding: 10px;
}

/* Make inputs/buttons a touch taller for comfort */
label input{
  height: 42px;
}

/* Optional: on auth pages, reduce topbar weight */
body.auth-slim .topbar{ box-shadow:none; }
/* Entry page field sizing */
.hours-input {
  width: 110px;          /* smaller Hours box */
}

.desc-input {
  min-height: 120px;     /* taller Description */
  width: 100%;
  resize: vertical;      /* let the user stretch it if they want */
}

/* Keep it tidy on small screens */
@media (max-width: 640px) {
  .hours-input { width: 90px; }
}


